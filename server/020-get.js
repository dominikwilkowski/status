/***************************************************************************************************************************************************************
 *
 * Get module
 *
 * This module gets the data from the database
 *
 **************************************************************************************************************************************************************/


//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Dependencies
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
const Moment = require('moment');


Server.get = (() => {

	const DB = Server.DATABASE.collection('data'); //database collection

//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Private function
// TODO
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
	const TODO = ( item ) => {
		Server.debugging.send(`Running request for "${item}"`, 2);
	}


	return {
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Public function
// get day data
//
// @param  [request]  {object}  The request object
// @param  [result]   {object}  The result object
// @param  [next]     {object}  The next object
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
		day: ( request, result, next ) => {
			Server.debugging.report(`Running get.day`, 1);

			DB.find({
				date: {
					$gte: Moment().subtract( 1, 'd' ).toDate()
				},
			}, {}, ( error, docs ) => {
				console.log(docs);
			});

			console.log('day');

			result.send('day');
		},


//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Public function
// get week data
//
// @param  [request]  {object}  The request object
// @param  [result]   {object}  The result object
// @param  [next]     {object}  The next object
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
		week: ( request, result, next ) => {
			Server.debugging.report(`Running get.week`, 1);
			console.log('week');

			result.send('week');
		},


//--------------------------------------------------------------------------------------------------------------------------------------------------------------
// Public function
// get month data
//
// @param  [request]  {object}  The request object
// @param  [result]   {object}  The result object
// @param  [next]     {object}  The next object
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
		month: ( request, result, next ) => {
			Server.debugging.report(`Running get.month`, 1);
			console.log('month');

			result.send('month');
		},

	}
})();