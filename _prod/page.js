"use strict";var Page=function(){return{DEBUG:false,DEBUGfilter:[],TIMEFRAME:["day","week","month"],DATA:{},ADDITIONS:{},GRAPH:{title:"The network response time",titlePosition:"none",colors:["#42a5f5"],backgroundColor:"#263238",lineWidth:1,hAxis:{slantedText:!1,maxAlternation:1,textStyle:{color:"#fff"},gridlines:{color:"#556E79"}},vAxis:{title:"Response time",titleTextStyle:{color:"#42a5f5"},textStyle:{color:"#fff"},gridlines:{color:"#556E79"}},legend:{position:"none"},chartArea:{height:"200"},annotations:{textStyle:{color:"#c80038"},stem:{color:"#c80038",length:202}},tooltip:{isHtml:!0},height:270},debugging:function(a,b){if(Page.DEBUGfilter.length>0){for(var c=a.split(": "),d="",e=Page.DEBUGfilter.length-1;e>=0;e--)c[0]===Page.DEBUGfilter[e]&&(d=a);a=d}Page.DEBUG&&a.length>0&&("headline"===b?console.log("%c"+a,"font-size: 25px;"):"report"===b?console.log("%c☑ ","color: green; font-size: 18px;",a):"error"===b?console.log("%c☒ ","color: red; font-size: 18px;",a):"interaction"===b?console.log("%c☜ ","color: blue; font-size: 18px;",a):"send"===b?console.log("%c↝ ","color: pink; font-size: 18px;",a):"receive"===b&&console.log("%c↜ ","color: pink; font-size: 18px;",a))}}}();!function(a){function b(b,c,d){a.debugging("Running private data.format","report");var e=[],f=0,g=0,h=c+d;a.ADDITIONS[h]={};for(var i=0;i<b.length;i++){var j=null,k=null,l=moment(b[i].date).format("MMMM Do YYYY, h:mm a").toString();b[i].time===-1?(j="Down",k="The service was down on "+l+' with error "'+b[i].error+'"',b[i].time=0,g++):f+=parseInt(b[i].time),e.push([moment(b[i].date).toDate(),parseInt(b[i].time),l+": "+b[i].time+"ms",j,k])}return a.ADDITIONS[h].mean=Math.floor(f/b.length)+"ms",a.ADDITIONS[h].availability=Math.round((b.length-g)/b.length*1e5)/1e3+"%",e}var c={};c.get=function(c,d,e){a.debugging("Running data.get for "+d,"report");var f=a.ENDPOINTS+e+"/"+d;e.length<1||a.TIMEFRAME.indexOf(e)===-1?c.addClass("has-error").text('The given period "'+e+'" is not a valid option'):$.ajax({url:f,dataType:"json",timeout:7e3,success:function(f){a.debugging("Got data for "+d,"receive"),c.addClass("js-rendered"),a.DATA[d+e]=b(f,d,e),a.render.graph(c,d,e)},error:function(b,e,f){a.debugging("Data error for "+d+" with: "+f,"error"),c.addClass("has-error").text("Could not reach the server: "+f)}})},a.data=c}(Page),function(a){var b={};b.graph=function(b,c,d){a.debugging("Running render.graph","report");var e=a.DATA[c+d];void 0===e?(a.debugging('render.graph: No data available for "'+c+d+'"',"error"),b.addClass("has-error").text("The data was lost inside this app :(")):google.charts.setOnLoadCallback(function(){var f=new google.visualization.DataTable,g=new google.visualization.LineChart(b[0]);f.addColumn("date","Date"),f.addColumn("number","Response time"),f.addColumn({type:"string",role:"tooltip"}),f.addColumn({type:"string",role:"annotation"}),f.addColumn({type:"string",role:"annotationText"}),f.addRows(e),g.draw(f,a.GRAPH),b.removeClass("is-loading").addClass("is-rendered"),$('.js-status-mean[data-ID="'+c+'"][data-period="'+d+'"]').not(".js-rendered").each(function(){a.render.addition($(this),"mean",c,d)}),$('.js-status-availability[data-ID="'+c+'"][data-period="'+d+'"]').not(".js-rendered").each(function(){a.render.addition($(this),"availability",c,d)})})},b.addition=function(b,c,d,e){a.debugging("Running render.addition","report");var f=d+e,g=a.ADDITIONS[f];void 0!==g&&void 0!==g[c]?b.text(g[c]):b.addClass("has-error").text(g),b.addClass("js-rendered")},a.render=b}(Page),function(a){a.init=function(){window.console||(console={log:function(){}}),a.debugging("DEBUGGING INFORMATION","headline"),$("html").removeClass("no-js").addClass("js"),$("body").on("keydown",function(b){var c=b.keyCode||b.which;9==c&&(a.debugging("Page: Tab detected","report"),$("html").addClass("is-keyboarduser"),$("body").off("keydown"))}),void 0===a.ENDPOINTS?a.debugging("No Endpoint set","error"):(google.charts.load("current",{packages:["corechart","line"]}),$(".js-status").not(".js-rendered").each(function(){var b=$(this),c=b.attr("data-id"),d=b.attr("data-period");b.addClass("is-loading"),void 0!==a.DATA[c+d]?a.render.graph(b,c,d):a.data.get(b,c,d)}),$(window).resize(function(){$(".js-rendered").removeClass("js-rendered"),$(".js-status").not(".js-rendered").each(function(){var b=$(this),c=b.attr("data-id"),d=b.attr("data-period");a.render.graph(b,c,d)})}))}}(Page);